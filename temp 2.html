<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>onload</title>
	<script type="text/javascript">

		var passengers = [  { name: "Jane Doloop", paid: true, ticket: "coach" },
                    		{ name: "Dr. Evil", paid: true, ticket: "firstclass" },
                    		{ name: "Sue Property", paid: false, ticket: "firstclass" },
                    		{ name: "John Funcall", paid: true, ticket: "coach" } ];

		function processPassengers(passengers, testFunction) {
			for (var i = 0; i < passengers.length; i++) {
				if (testFunction(passengers[i])) {
					return false;
				}
			}
			return true;
		}
		
		function checkNoFlyList(passenger) {
			return (passenger.name === "Dr. Evil") 
		}

		function checkNotPaid(passenger) {
			return (!passenger.paid) 
		}

		var allCanFly = processPassengers(passengers, checkNoFlyList);
		if (!allCanFly) {
			console.log("The plane can't take off: we have a passenger on the no-fly-list.");
		}

		var allPaid = processPassengers(passengers, checkNotPaid);
		if (!allPaid) {
			console.log("The plane can't take off: not everyone has paid.");
		}

		function printPassenger(passenger) {
			console.log(passenger.name, ", Paid ticket: ", passenger.paid)
		}

		var allPrint = processPassengers(passengers, printPassenger);
		allPrint();

		function serveCustomer(passenger) {
			// if (passenger.ticket === "firstclass") {
			// 	alert("Would you like a cocktail or wine?");
			// } else {
			// 	alert("Your choice is cola or water.");
			// }
			var getDrinkOrderFunction = createDrinkOrder(passenger);
			getDrinkOrderFunction();
    // Предложить обед
    	getDrinkOrderFunction();
    	getDrinkOrderFunction();
    // Забрать мусор
  	}

  	function createDrinkOrder(passenger) {
  		var orderFunction;

  		if (passenger.ticket === "firstclass") {
  			orderFunction = function() {
  				alert("Would you like a cocktail or wine?");
  			};
  		} else {
  				orderFunction = function() {
  					alert("Your choice is cola or water.");
  				};
  		}
  		return orderFunction;
  	}

  	function servePassengers(passengers) {
  		for (var i = 0; i < passengers.length; i++) {
  			serveCustomer(passengers[i]);
  		}
  	}
  	
  	servePassengers(passengers);


	</script>
</head>
<body>
	
</body>
</html>